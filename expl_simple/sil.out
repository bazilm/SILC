START
MOV SP,1535
MOV BP,1535
PUSH R0
CALL main
HALT
addd:
PUSH BP
MOV BP,SP
MOV R0,BP
MOV R1,-3
ADD R0,R1
MOV R0,[R0]
MOV R1,3
MOV [R0],R1
MOV R0,BP
MOV R1,-2
ADD R0,R1
MOV R1,0
MOV R1,[R1]
MOV [R0],R1
POP BP
RET
main:
PUSH BP
MOV BP,SP
PUSH R0
PUSH R0
PUSH R0
MOV R0,BP
MOV R1,1
ADD R0,R1
IN R1
MOV [R0],R1
MOV R0,BP
MOV R1,2
ADD R0,R1
IN R1
MOV [R0],R1
MOV R0,BP
MOV R1,3
ADD R0,R1
MOV R1,2
MOV [R0],R1
MOV R0,BP
MOV R1,1
ADD R0,R1
PUSH R0
MOV R1,BP
MOV R2,2
ADD R1,R2
MOV R1,[R1]
PUSH R1
MOV R1,BP
MOV R2,3
ADD R1,R2
PUSH R1
MOV R0,0
PUSH R0
CALL addd
POP R1
POP R0
POP R0
POP R0
MOV [R0],R1
MOV R0,BP
MOV R1,1
ADD R0,R1
MOV R0,[R0]
OUT R0
MOV R0,BP
MOV R1,-2
ADD R0,R1
MOV R1,1
MOV [R0],R1
POP R2
POP R2
POP R2
POP BP
RET
